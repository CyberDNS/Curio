# ============================================================================
# Curio - AI-Powered News Aggregator
# Environment Configuration Template
# ============================================================================

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION (Required)
# ----------------------------------------------------------------------------
# PostgreSQL database credentials
# These values are used to construct the connection string

# Database username
# Optional - Default: curio
POSTGRES_USER=curio

# Database password (REQUIRED)
POSTGRES_PASSWORD=change-this-password

# Database host
# Optional - Default: localhost
# Use 'db' when running with docker-compose
POSTGRES_HOST=localhost

# Database port
# Optional - Default: 5432
POSTGRES_PORT=5432

# Database name
# Optional - Default: curio
POSTGRES_DB=curio

# ----------------------------------------------------------------------------
# APPLICATION SECURITY (Required)
# ----------------------------------------------------------------------------
# Secret key for JWT tokens and session encryption
# Generate with: openssl rand -hex 32
SECRET_KEY=change-this-to-a-random-secret-key

# ----------------------------------------------------------------------------
# LLM CONFIGURATION (Required)
# ----------------------------------------------------------------------------
# OpenAI API key for article processing and categorization
OPENAI_API_KEY=your-openai-api-key-here

# LLM model to use for article analysis
# Optional - Default: gpt-5-nano
# Options: gpt-5-nano, gpt-4o-mini, gpt-4o, gpt-4-turbo-preview, gpt-4, gpt-3.5-turbo
LLM_MODEL=gpt-5-nano

# Embedding model for duplicate detection
# Optional - Default: text-embedding-3-small
# Options: text-embedding-3-small, text-embedding-3-large, text-embedding-ada-002
EMBEDDING_MODEL=text-embedding-3-small

# Similarity threshold for duplicate detection (0.0 to 1.0)
# Optional - Default: 0.85
# Lower = more strict (fewer duplicates), Higher = more lenient (more duplicates)
DUPLICATE_SIMILARITY_THRESHOLD=0.85

# Downvote filtering similarity threshold (0.0 to 1.0)
# Optional - Default: 0.80
# Articles with similarity above this threshold to downvoted content get penalized
# Lower = more lenient (more articles penalized), Higher = more strict (only very similar articles penalized)
DOWNVOTE_SIMILARITY_THRESHOLD=0.80

# Maximum score penalty for downvoted similar content (0.0 to 1.0)
# Optional - Default: 0.4
# Maximum amount to reduce relevance score for articles similar to downvoted content
# Example: 0.4 means up to 40% reduction, 0.2 means up to 20% reduction
DOWNVOTE_MAX_PENALTY=0.4

# ----------------------------------------------------------------------------
# OAUTH2 / OPENID CONNECT AUTHENTICATION (Required)
# ----------------------------------------------------------------------------
# OAuth2 client credentials from your identity provider (e.g., Pocket ID)
OAUTH_CLIENT_ID=your-oauth-client-id
OAUTH_CLIENT_SECRET=your-oauth-client-secret

# OpenID Connect discovery URL for your identity provider
# Example for Pocket ID: https://your-server.com/.well-known/openid-configuration
OAUTH_SERVER_METADATA_URL=https://your-pocket-id-server.com/.well-known/openid-configuration

# OAuth2 callback URL (must match the one configured in your identity provider)
# Format: [protocol]://[domain]:[port]/api/auth/callback
OAUTH_REDIRECT_URI=http://localhost:8000/api/auth/callback

# ----------------------------------------------------------------------------
# APPLICATION SETTINGS (Optional)
# ----------------------------------------------------------------------------
# Enable debug mode (verbose logging)
# Optional - Default: false
# WARNING: Do not enable in production
DEBUG=false

# Enable development mode authentication bypass
# Optional - Default: false
# ⚠️  CRITICAL SECURITY WARNING: This disables all authentication!
# Only use for local development when OAuth is not configured.
# NEVER enable this in production or publicly accessible environments.
# When enabled, anyone can access the application without credentials.
DEV_MODE=false

# RSS feed fetch interval in minutes
# Optional - Default: 60
# Determines how often the system checks for new articles
RSS_FETCH_INTERVAL=60

# CORS allowed origins (comma-separated list)
# Optional - Default: http://localhost:3000
# Format: http://domain1:port,http://domain2:port
CORS_ORIGINS=http://localhost:3000

# Media storage directory path
# Optional - Default: ./media
# Use absolute path in production (e.g., /app/media in Docker)
MEDIA_ROOT=./media

# ----------------------------------------------------------------------------
# COOKIE SECURITY (Optional)
# ----------------------------------------------------------------------------
# Enable secure flag on cookies (requires HTTPS)
# Optional - Default: true
# ⚠️  Set to false for local development without HTTPS
# In production with HTTPS, this MUST be true for security
COOKIE_SECURE=false

# Cookie SameSite policy
# Optional - Default: lax
# Options: "strict" (maximum security, may break some OAuth flows)
#          "lax" (balanced - recommended)
#          "none" (requires COOKIE_SECURE=true, use only if needed)
COOKIE_SAMESITE=lax

# Cookie domain restriction (optional)
# Optional - Default: None (no restriction)
# Example: .yourdomain.com (allows cookies across subdomains)
# COOKIE_DOMAIN=.example.com

# HTTP Strict Transport Security (HSTS)
# Optional - Default: true
# Tells browsers to only connect via HTTPS (production only)
# Only applies when COOKIE_SECURE=true, DEBUG=false, and DEV_MODE=false
ENABLE_HSTS=true

# HSTS max age in seconds
# Optional - Default: 31536000 (1 year)
# How long browsers should remember HTTPS requirement
HSTS_MAX_AGE=31536000

# Apply HSTS to all subdomains
# Optional - Default: true
# WARNING: Only enable if ALL subdomains support HTTPS
HSTS_INCLUDE_SUBDOMAINS=true

# Submit to browser HSTS preload lists
# Optional - Default: false
# WARNING: This is permanent! Read https://hstspreload.org before enabling
HSTS_PRELOAD=false

# ----------------------------------------------------------------------------
# NETWORK CONFIGURATION (Optional - Docker only)
# ----------------------------------------------------------------------------
# These are only used when running with Docker Compose
# Backend API server port
# Optional - Default: 8000
BACKEND_PORT=8000

# Frontend development server port
# Optional - Default: 3000
FRONTEND_PORT=3000

# ----------------------------------------------------------------------------
# FRONTEND CONFIGURATION (Optional)
# ----------------------------------------------------------------------------
# Backend API URL for frontend proxy configuration
# Optional - Used by Vite dev server proxy
# Default: http://localhost:8000
REACT_APP_API_URL=http://localhost:8000

# Backend API URL for frontend API calls
# Optional - Default: /api (uses proxy)
# Set this if you need to point to a different backend
# VITE_API_URL=http://localhost:8000/api
